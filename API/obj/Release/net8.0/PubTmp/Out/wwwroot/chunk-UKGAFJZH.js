import{a as Q}from"./chunk-QJKD3SDR.js";import{a as pe,b as Te,e as Y,f as Ie,g as ke,h as we,i as Me,j as Ee,m as Oe,o as Ne,p as ze,q as Fe,s as J,t as Be}from"./chunk-ECQ47ZSO.js";import{b as Ve}from"./chunk-BNX52G2A.js";import{$a as U,Ca as g,D as ee,Da as c,Db as Ce,E as R,F as de,Ga as N,Gb as Se,H as ue,Ha as he,Jb as ye,Kb as be,L as S,M as ge,Oa as z,Pa as l,Q as h,Qa as x,R as f,Ra as M,Sa as fe,Ta as se,Ua as I,Xa as E,Ya as xe,_ as q,_a as $,a as Z,ba as te,bb as F,ea as r,fa as C,ga as ie,ha as k,hb as re,ib as G,jb as y,lb as _e,m as D,ma as _,oa as m,p as j,pb as H,qa as T,qb as b,ra as ne,sa as s,ta as p,tb as Pe,ua as w,ub as ve,v as le,va as ae,w as me,wa as oe,xa as O,ya as v}from"./chunk-CVZN5AOS.js";function Qe(n,a){if(n&1&&(s(0,"span",14),l(1),$(2,"currency"),p()),n&2){let i=c(2);r(),x(U(2,1,i.product.price))}}function Ye(n,a){n&1&&(s(0,"span",14),l(1),p()),n&2&&(r(),x("Free"))}function Je(n,a){if(n&1){let i=v();s(0,"div",1)(1,"div",2)(2,"div",3),w(3,"img",4),p(),s(4,"div",5)(5,"button",6),g("click",function(){h(i);let t=c();return f(t.onAddItemToBasket())}),p(),s(6,"button",7),l(7," View "),p()()(),s(8,"div",8)(9,"a",9)(10,"h5",10),l(11),p()(),s(12,"a",11),l(13,"Category: "),s(14,"span",12),l(15),p()(),_(16,Qe,3,3,"span",13)(17,Ye,2,1,"span",13),p()()}if(n&2){let i=c();r(3),N("src",i.product.pictureUrl,q),N("alt",i.product.name),r(3),he("routerLink","/Shop/",i.product.id,""),r(5),x(i.product.name),r(4),x(i.product.productType),r(),m("ngIf",i.product.price!=0),r(),m("ngIf",i.product.price===0)}}var Le=(()=>{let a=class a{constructor(e){this.basketService=e}onAddItemToBasket(){this.product&&this.basketService.addItemToBasket(this.product)}};a.\u0275fac=function(t){return new(t||a)(C(Q))},a.\u0275cmp=S({type:a,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!0,features:[I],decls:1,vars:1,consts:[["class","card h-100 shadow-sm",4,"ngIf"],[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"product-image-box"],[1,"img-fluid","bg-secondary",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],[1,"btn","btn-primary","fa","fa-shopping-cart","me-2",3,"click"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],["href","",1,"text-decoration-none"],[1,"text-uppercase"],[1,"text-decoration-none","mt-auto",2,"font-size","13px"],[1,"d-inline-block","py-1","px-2","bg-primary","text-white","ms-2","cursor-pointer"],["class","mb-2 fs-4 mt-2",4,"ngIf"],[1,"mb-2","fs-4","mt-2"]],template:function(t,o){t&1&&_(0,Je,18,7,"div",0),t&2&&m("ngIf",o.product)},dependencies:[b,y,H,ye,Se],styles:[".btn[_ngcontent-%COMP%]{width:40%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.product-image-box[_ngcontent-%COMP%]{position:relative;height:400px;overflow:hidden;display:flex;justify-content:center}.product-image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:0;position:absolute;scale:1.1;height:100%}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:100;transition:all .5s;position:absolute}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{left:20px;bottom:16px;transform:translate(-15px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{right:20px;bottom:16px;transform:translate(15px)}"]});let n=a;return n})();var V=class{constructor(){this.brandId=0,this.typeId=0,this.sort="name",this.pageNumber=1,this.pageSize=6,this.search=""}};function Ke(n,a){if(n&1&&(s(0,"span"),l(1," Showing "),s(2,"strong"),l(3),p(),l(4," of "),s(5,"strong"),l(6),p(),l(7," results "),p()),n&2){let i=c();r(3),fe(" ",(i.pageNumber-1)*i.pageSize+1," - ",i.pageNumber*i.pageSize>i.totalCount?i.totalCount:i.pageSize*i.pageNumber," "),r(3),x(i.totalCount)}}function We(n,a){n&1&&(s(0,"span"),l(1," There are "),s(2,"strong"),l(3,"0"),p(),l(4," results for this filter "),p())}var De=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=S({type:a,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",totalCount:"totalCount",pageSize:"pageSize"},standalone:!0,features:[I],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,o){t&1&&(s(0,"header"),_(1,Ke,8,3,"span",0)(2,We,5,0,"span",0),p()),t&2&&(r(),m("ngIf",o.totalCount&&o.pageNumber&&o.pageSize),r(),m("ngIf",o.totalCount===0))},dependencies:[b,y]});let n=a;return n})();var Xe=(n,a)=>({"pull-left":n,"float-left":a}),Ze=(n,a)=>({"pull-right":n,"float-right":a}),K=(n,a)=>({disabled:n,currentPage:a});function et(n,a){if(n&1){let i=v();s(0,"li",11)(1,"a",12),g("click",function(t){h(i);let o=c();return f(o.selectPage(1,t))}),O(2,13),p()()}if(n&2){let i=c(),e=z(13);T("disabled",i.noPrevious()||i.disabled),r(2),m("ngTemplateOutlet",i.customFirstTemplate||e)("ngTemplateOutletContext",E(4,K,i.noPrevious()||i.disabled,i.page))}}function tt(n,a){if(n&1){let i=v();s(0,"li",14)(1,"a",12),g("click",function(t){h(i);let o=c();return f(o.selectPage(o.page-1,t))}),O(2,13),p()()}if(n&2){let i=c(),e=z(11);T("disabled",i.noPrevious()||i.disabled),r(2),m("ngTemplateOutlet",i.customPreviousTemplate||e)("ngTemplateOutletContext",E(4,K,i.noPrevious()||i.disabled,i.page))}}var it=(n,a,i)=>({disabled:n,$implicit:a,currentPage:i});function nt(n,a){if(n&1){let i=v();s(0,"li",15)(1,"a",12),g("click",function(t){let d=h(i).$implicit,u=c();return f(u.selectPage(d.number,t))}),O(2,13),p()()}if(n&2){let i=a.$implicit,e=c(),t=z(7);T("active",i.active)("disabled",e.disabled&&!i.active),r(2),m("ngTemplateOutlet",e.customPageTemplate||t)("ngTemplateOutletContext",xe(6,it,e.disabled,i,e.page))}}function at(n,a){if(n&1){let i=v();s(0,"li",16)(1,"a",12),g("click",function(t){h(i);let o=c();return f(o.selectPage(o.page+1,t))}),O(2,13),p()()}if(n&2){let i=c(),e=z(9);T("disabled",i.noNext()||i.disabled),r(2),m("ngTemplateOutlet",i.customNextTemplate||e)("ngTemplateOutletContext",E(4,K,i.noNext()||i.disabled,i.page))}}function ot(n,a){if(n&1){let i=v();s(0,"li",17)(1,"a",12),g("click",function(t){h(i);let o=c();return f(o.selectPage(o.totalPages,t))}),O(2,13),p()()}if(n&2){let i=c(),e=z(15);T("disabled",i.noNext()||i.disabled),r(2),m("ngTemplateOutlet",i.customLastTemplate||e)("ngTemplateOutletContext",E(4,K,i.noNext()||i.disabled,i.page))}}function st(n,a){if(n&1&&l(0),n&2){let i=a.$implicit;x(i.text)}}function rt(n,a){if(n&1&&l(0),n&2){let i=c();x(i.getText("next"))}}function pt(n,a){if(n&1&&l(0),n&2){let i=c();x(i.getText("previous"))}}function ct(n,a){if(n&1&&l(0),n&2){let i=c();x(i.getText("first"))}}function lt(n,a){if(n&1&&l(0),n&2){let i=c();x(i.getText("last"))}}var Ae=(()=>{let a=class a{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xAB Previous",nextText:"Next \xBB",pageBtnClass:"",align:!0}}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})(),mt={provide:pe,useExisting:ee(()=>dt),multi:!0},dt=(()=>{let a=class a{constructor(e,t,o){this.elementRef=e,this.changeDetection=o,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xAB Previous",this.nextText="Next \xBB",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k,this.pageChanged=new k,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=e,this.config||this.configureOptions(Object.assign({},t.main,t.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(e){this._itemsPerPage=e,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(e){this._totalPages=e,this.numPages.emit(e),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(e){let t=this._page;this._page=e>this.totalPages?this.totalPages:e||1,this.changeDetection.markForCheck(),!(t===this._page||typeof t>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(e){this.config=Object.assign({},e)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(e){this.page=e,this.pages=this.getPages(this.page,this.totalPages)}getText(e){return this[`${e}Text`]||this.config[`${e}Text`]}noPrevious(){return this.page===1}noNext(){return this.page===this.totalPages}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}selectPage(e,t){t&&t.preventDefault(),this.disabled||(t&&t.target&&t.target.blur(),this.writeValue(e),this.onChange(this.page))}makePage(e,t,o){return{text:t,number:e,active:o}}getPages(e,t){let o=[],d=1,u=t,L=typeof this.maxSize<"u"&&this.maxSize<t;L&&this.maxSize&&(this.rotate?(d=Math.max(e-Math.floor(this.maxSize/2),1),u=d+this.maxSize-1,u>t&&(u=t,d=u-this.maxSize+1)):(d=(Math.ceil(e/this.maxSize)-1)*this.maxSize+1,u=Math.min(d+this.maxSize-1,t)));for(let P=d;P<=u;P++){let X=this.makePage(P,P.toString(),P===e);o.push(X)}if(L&&!this.rotate){if(d>1){let P=this.makePage(d-1,"...",!1);o.unshift(P)}if(u<t){let P=this.makePage(u+1,"...",!1);o.push(P)}}return o}calculateTotalPages(){let e=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(e||0,1)}};a.\u0275fac=function(t){return new(t||a)(C(te),C(Ae),C(ie))},a.\u0275cmp=S({type:a,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[se([mt])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(t,o){t&1&&(s(0,"ul",0)(1,"li",1)(2,"a",2),g("click",function(u){return o.selectPage(o.page-1,u)}),l(3),p()(),s(4,"li",1)(5,"a",2),g("click",function(u){return o.selectPage(o.page+1,u)}),l(6),p()()()),t&2&&(r(),ne(o.pageBtnClass),T("disabled",o.noPrevious())("previous",o.align),m("ngClass",E(18,Xe,o.align,o.align)),r(2),x(o.getText("previous")),r(),ne(o.pageBtnClass),T("disabled",o.noNext())("next",o.align),m("ngClass",E(21,Ze,o.align,o.align)),r(2),x(o.getText("next")))},dependencies:[re],encapsulation:2});let n=a;return n})(),ut={provide:pe,useExisting:ee(()=>ce),multi:!0},ce=(()=>{let a=class a{constructor(e,t,o){this.elementRef=e,this.changeDetection=o,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k,this.pageChanged=new k,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=e,this.config||this.configureOptions(t.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(e){this._itemsPerPage=e,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(e){this._totalPages=e,this.numPages.emit(e),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(e){let t=this._page;this._page=e>this.totalPages?this.totalPages:e||1,this.changeDetection.markForCheck(),!(t===this._page||typeof t>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(e){this.config=Object.assign({},e)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(e){this.page=e,this.pages=this.getPages(this.page,this.totalPages)}getText(e){return this[`${e}Text`]||this.config[`${e}Text`]}noPrevious(){return this.page===1}noNext(){return this.page===this.totalPages}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}selectPage(e,t){t&&t.preventDefault(),this.disabled||(t&&t.target&&t.target.blur(),this.writeValue(e),this.onChange(this.page))}makePage(e,t,o){return{text:t,number:e,active:o}}getPages(e,t){let o=[],d=1,u=t,L=typeof this.maxSize<"u"&&this.maxSize<t;L&&this.maxSize&&(this.rotate?(d=Math.max(e-Math.floor(this.maxSize/2),1),u=d+this.maxSize-1,u>t&&(u=t,d=u-this.maxSize+1)):(d=(Math.ceil(e/this.maxSize)-1)*this.maxSize+1,u=Math.min(d+this.maxSize-1,t)));for(let P=d;P<=u;P++){let X=this.makePage(P,P.toString(),P===e);o.push(X)}if(L&&!this.rotate){if(d>1){let P=this.makePage(d-1,"...",!1);o.unshift(P)}if(u<t){let P=this.makePage(u+1,"...",!1);o.push(P)}}return o}calculateTotalPages(){let e=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(e||0,1)}};a.\u0275fac=function(t){return new(t||a)(C(te),C(Ae),C(ie))},a.\u0275cmp=S({type:a,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[se([ut])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(t,o){t&1&&(s(0,"ul",0),_(1,et,3,7,"li",1)(2,tt,3,7,"li",2)(3,nt,3,10,"li",3)(4,at,3,7,"li",4)(5,ot,3,7,"li",5),p(),_(6,st,1,1,"ng-template",null,6,F)(8,rt,1,1,"ng-template",null,7,F)(10,pt,1,1,"ng-template",null,8,F)(12,ct,1,1,"ng-template",null,9,F)(14,lt,1,1,"ng-template",null,10,F)),t&2&&(m("ngClass",o.classMap),r(),m("ngIf",o.boundaryLinks),r(),m("ngIf",o.directionLinks),r(),m("ngForOf",o.pages),r(),m("ngIf",o.directionLinks),r(),m("ngIf",o.boundaryLinks))},dependencies:[re,G,y,_e],encapsulation:2});let n=a;return n})(),je=(()=>{let a=class a{static forRoot(){return{ngModule:a,providers:[]}}};a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=ge({type:a}),a.\u0275inj=de({imports:[b]});let n=a;return n})();function ft(n,a){if(n&1){let i=v();s(0,"pagination",1),g("pageChanged",function(t){h(i);let o=c();return f(o.onPagerChanged(t))}),p()}if(n&2){let i=c();m("boundaryLinks",!0)("totalItems",i.totalCount)("itemsPerPage",i.pageSize)("maxSize",10)("ngModel",i.pageNumber)}}var Re=(()=>{let a=class a{constructor(){this.pageChanged=new k}onPagerChanged(e){this.pageChanged.emit(e.page)}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=S({type:a,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},standalone:!0,features:[I],decls:1,vars:1,consts:[["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","ngModel","pageChanged",4,"ngIf"],["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","ngModel","pageChanged"]],template:function(t,o){t&1&&_(0,ft,1,5,"pagination",0),t&2&&m("ngIf",o.totalCount&&o.pageSize)},dependencies:[b,y,je,ce,J,Y,Me]});let n=a;return n})();var W=(()=>{let a=class a{constructor(e){this.http=e,this.baseUrl=be.apiUrl,this.products=[],this.brands=[],this.types=[],this.shopParams=new V,this.productCache=new Map}getProducts(e=!0){if(e||(this.productCache=new Map),this.productCache.size>0&&e&&this.productCache.has(Object.values(this.shopParams).join("-"))&&(this.pagination=this.productCache.get(Object.values(this.shopParams).join("-")),this.pagination))return D(this.pagination);let t=new Pe;return this.shopParams.brandId&&(t=t.append("brandId",this.shopParams.brandId)),this.shopParams.typeId&&(t=t.append("typeId",this.shopParams.typeId)),this.shopParams.search!==""&&this.shopParams.search!==null&&(t=t.append("search",this.shopParams.search)),t=t.append("sort",this.shopParams.sort),t=t.append("pageIndex",this.shopParams.pageNumber),t=t.append("pageSize",this.shopParams.pageSize),this.http.get(`${this.baseUrl}products`,{params:t}).pipe(j(o=>(this.productCache.set(Object.values(this.shopParams).join("-"),o),this.pagination=o,o)))}getProduct(e){let t=[...this.productCache.values()].reduce((o,d)=>Z(Z({},o),d.data.find(u=>u.id===e)),{});return t?.name?D(t):this.http.get(`${this.baseUrl}products/${e}`)}setShopParams(e){this.shopParams=e}getShopParams(){return this.shopParams}getBrands(){return this.brands.length>0?D(this.brands):this.http.get(`${this.baseUrl}products/brands`).pipe(j(e=>(this.brands=e,e)))}getTypes(){return this.types.length>0?D(this.types):this.http.get(`${this.baseUrl}products/types`).pipe(j(e=>(this.types=e,e)))}};a.\u0275fac=function(t){return new(t||a)(ue(ve))},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function xt(n,a){if(n&1&&(s(0,"option",20),l(1),p()),n&2){let i=a.$implicit;m("value",i.value),r(),M(" ",i.name," ")}}function _t(n,a){if(n&1){let i=v();s(0,"li",22),g("click",function(){h(i);let t=c().$implicit,o=c(2);return f(o.onBrandSelected(t.id))}),l(1),p()}if(n&2){let i=c().$implicit,e=c(2);T("active",i.id===e.shopService.getShopParams().brandId),m("value",i.id),r(),M(" ",i.name," ")}}function Pt(n,a){if(n&1&&(ae(0),_(1,_t,2,4,"li",21),oe()),n&2){let i=a.index,e=c(2);r(),m("ngIf",i<6||e.seeAllBrands)}}function vt(n,a){if(n&1){let i=v();s(0,"li",23)(1,"a",24),g("click",function(){h(i);let t=c(2);return f(t.onSeeAllBrands())}),l(2,"See all brands"),p()()}}function Ct(n,a){if(n&1){let i=v();s(0,"li",22),g("click",function(){h(i);let t=c().$implicit,o=c(2);return f(o.onTypeSelected(t.id))}),l(1),p()}if(n&2){let i=c().$implicit,e=c(2);T("active",i.id===e.shopService.getShopParams().typeId),m("value",i.id),r(),M(" ",i.name," ")}}function St(n,a){if(n&1&&(ae(0),_(1,Ct,2,4,"li",21),oe()),n&2){let i=a.index,e=c(2);r(),m("ngIf",i<6||e.seeAllTypes)}}function yt(n,a){if(n&1){let i=v();s(0,"li",23)(1,"a",24),g("click",function(){h(i);let t=c(2);return f(t.onSeeAllTypes())}),l(2,"See all Types"),p()()}}function bt(n,a){if(n&1&&(s(0,"div",25),w(1,"app-product-item",26),p()),n&2){let i=a.$implicit;r(),m("product",i)}}function Tt(n,a){if(n&1){let i=v();s(0,"div",2)(1,"section",3)(2,"h5",4),l(3,"Sort"),p(),s(4,"select",5),g("change",function(t){h(i);let o=c();return f(o.onSortSelected(t))}),_(5,xt,2,2,"option",6),p(),s(6,"h5",4),l(7,"Brands"),p(),s(8,"ul",7),_(9,Pt,2,1,"ng-container",8)(10,vt,3,0,"li",9),p(),s(11,"h5",4),l(12,"Types"),p(),s(13,"ul",7),_(14,St,2,1,"ng-container",8)(15,yt,3,0,"li",9),p()(),s(16,"section",10)(17,"div",11),w(18,"app-paging-header",12),s(19,"form",13)(20,"input",14),g("keyup.enter",function(){h(i);let t=c();return f(t.onSearch())}),p(),s(21,"button",15),g("click",function(){h(i);let t=c();return f(t.onReset())}),l(22," Reset "),p()()(),s(23,"div",16),_(24,bt,2,1,"div",17),p(),s(25,"div",18)(26,"app-pager",19),g("pageChanged",function(t){h(i);let o=c();return f(o.onPageChanged(t))}),p()()()()}if(n&2){let i=c();r(5),m("ngForOf",i.sortOptions),r(4),m("ngForOf",i.brands),r(),m("ngIf",!i.seeAllBrands),r(4),m("ngForOf",i.types),r(),m("ngIf",!i.seeAllTypes),r(3),m("pageNumber",i.shopService.getShopParams().pageNumber)("pageSize",i.shopService.getShopParams().pageSize)("totalCount",i.totalCount),r(),m("formGroup",i.form),r(5),m("ngForOf",i.products),r(2),m("pageNumber",i.shopService.getShopParams().pageNumber)("totalCount",i.totalCount)("pageSize",i.shopService.getShopParams().pageSize)}}var $e=(()=>{let a=class a{constructor(e){this.shopService=e,this.products=[],this.brands=[],this.types=[],this.seeAllBrands=!1,this.seeAllTypes=!1,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to High",value:"priceAsc"},{name:"Price: High to Low ",value:"priceDesc"}],this.totalCount=0}ngOnInit(){this.getProducts(),this.getTypes(),this.getBrands(),this.form=new ke({search:new we("")}),this.form.valueChanges.pipe(le(700)).subscribe(e=>{if(e&&this.form.controls.search.value){let t=this.shopService.getShopParams();t.search=e.search,this.shopService.setShopParams(t),this.getProducts()}})}getProducts(){this.shopService.getProducts().subscribe({next:e=>{this.products=e.data,this.totalCount=e.count},error:e=>console.log(e)})}getBrands(){this.shopService.getBrands().subscribe({next:e=>this.brands=[{id:0,name:"All"},...e],error:e=>console.log(e)})}getTypes(){this.shopService.getTypes().subscribe({next:e=>this.types=[{id:0,name:"All"},...e],error:e=>console.log(e)})}onBrandSelected(e){let t=this.shopService.getShopParams();t.pageNumber=1,t.brandId=e,this.shopService.setShopParams(t),this.getProducts()}onTypeSelected(e){let t=this.shopService.getShopParams();t.pageNumber=1,t.typeId=e,this.shopService.setShopParams(t),this.getProducts()}onSortSelected(e){let t=this.shopService.getShopParams();t.sort=e.target.value,this.shopService.setShopParams(t),this.getProducts()}onPageChanged(e){let t=this.shopService.getShopParams();t.pageNumber!==e&&(t.pageNumber=e,this.shopService.setShopParams(t),this.getProducts())}onSearch(){let e=this.shopService.getShopParams();e.pageNumber=1,e.search=this.form.controls.search.value,this.shopService.setShopParams(e),this.getProducts()}onReset(){this.form.reset(),this.shopService.setShopParams(new V),this.getProducts()}onSeeAllBrands(){this.seeAllBrands=!0}onSeeAllTypes(){this.seeAllTypes=!0}};a.\u0275fac=function(t){return new(t||a)(C(W))},a.\u0275cmp=S({type:a,selectors:[["app-shop"]],standalone:!0,features:[I],decls:2,vars:1,consts:[[1,"container",2,"margin-top","32px"],["class","row",4,"ngIf"],[1,"row"],[1,"col-3"],[1,"text-primary","ms-3"],[1,"form-select","mb-4",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"list-group","my-3"],[4,"ngFor","ngForOf"],["class","mt-2 text-center list-unstyled",4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"pageNumber","pageSize","totalCount"],[1,"d-flex","mt-2",3,"formGroup"],["type","text","placeholder","Search","formControlName","search",1,"form-control","me-2",3,"keyup.enter"],["type","button",1,"btn","btn-outline-success","mx-2",3,"click"],[1,"row","row-cols-3","g-3","mb-5"],["class","col",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"pageNumber","totalCount","pageSize","pageChanged"],[3,"value"],["class","list-group-item",3,"active","value","click",4,"ngIf"],[1,"list-group-item",3,"value","click"],[1,"mt-2","text-center","list-unstyled"],[1,"cursor-pointer","text-decoration-none",2,"cursor","pointer",3,"click"],[1,"col"],[3,"product"]],template:function(t,o){t&1&&(s(0,"div",0),_(1,Tt,27,13,"div",1),p()),t&2&&(r(),m("ngIf",o.types.length>0||o.brands.length>0))},dependencies:[J,Ee,ze,Fe,Te,Y,Ie,Be,Oe,Ne,b,G,y,Le,De,Re],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#0d6efd;color:#fff}"]});let n=a;return n})();function It(n,a){if(n&1&&(s(0,"h5",19),l(1),p()),n&2){let i=c(2);r(),M(" You have ",i.quantityInBasket," of this item in your basket ")}}function kt(n,a){if(n&1){let i=v();s(0,"div",2)(1,"div",3)(2,"div",4),w(3,"img",5),p()(),s(4,"div",6)(5,"h2",7),l(6),p(),s(7,"p",8),l(8),$(9,"currency"),p(),_(10,It,2,1,"h5",9),s(11,"div",10)(12,"i",11),g("click",function(){h(i);let t=c();return f(t.onDecrementQuantity())}),p(),s(13,"span",12),l(14),p(),s(15,"i",13),g("click",function(){h(i);let t=c();return f(t.onIncrementQuantity())}),p(),s(16,"button",14),g("click",function(){h(i);let t=c();return f(t.onUpdateBasket())}),l(17),p()(),s(18,"div",15)(19,"h4"),l(20,"Description"),p(),s(21,"p"),l(22),p()(),s(23,"div",16)(24,"p",17),l(25," Category: "),s(26,"span",18),l(27),p()(),s(28,"p",17),l(29," Company: "),s(30,"span",18),l(31),p()()()()()}if(n&2){let i=c();r(3),N("src",i.product.pictureUrl,q),N("alt",i.product.name),r(3),x(i.product.name),r(2),x(U(9,11,i.product.price)),r(2),m("ngIf",i.quantityInBasket>0),r(4),x(i.quantity),r(2),m("disabled",i.quantity===i.quantityInBasket),r(),M(" ",i.buttonText," "),r(5),x(i.product.description),r(5),x(i.product.productType),r(4),x(i.product.productBrand)}}var Ue=(()=>{let a=class a{constructor(e,t,o,d){this.shopService=e,this.route=t,this.bcService=o,this.basketService=d,this.quantity=1,this.quantityInBasket=0,this.bcService.set("@productDetails"," ")}ngOnInit(){this.loadProduct()}loadProduct(){let e=this.route.snapshot.paramMap.get("id");e&&this.shopService.getProduct(+e).subscribe({next:t=>{this.product=t,this.bcService.set("@productDetails",this.product.name),this.basketService.basketSource$.pipe(me(1)).subscribe({next:o=>{let d=o?.items.find(u=>u.id===+e);d&&(this.quantity=d.quantity,this.quantityInBasket=d.quantity)}})},error:t=>{console.log(t)}})}onIncrementQuantity(){this.quantity++}onDecrementQuantity(){this.quantity--}onUpdateBasket(){if(this.product)if(this.quantity>this.quantityInBasket){let e=this.quantity-this.quantityInBasket;this.quantityInBasket+=e,this.basketService.addItemToBasket(this.product,e)}else{let e=this.quantityInBasket-this.quantity;this.quantityInBasket-=e,this.basketService.removeItemFromBasket(this.product.id,e)}}get buttonText(){return this.quantityInBasket===0?"Add to basked":"Update basket"}};a.\u0275fac=function(t){return new(t||a)(C(W),C(Ce),C(Ve),C(Q))},a.\u0275cmp=S({type:a,selectors:[["app-product-details"]],standalone:!0,features:[I],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"product-image-box","w-100","d-flex","justify-content-center"],[1,"",3,"src","alt"],[1,"col-6","mt-5"],[1,"fw-bold"],[2,"font-size","3em"],["class","text-primary mb-3",4,"ngIf"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-primary","me-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-primary","ms-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","ms-4",3,"disabled","click"],[1,"row","mt-4"],[1,"d-flex","gap-5","mt-4"],[1,"text-decoration-none",2,"font-size","15px"],[1,"d-inline-block","py-1","px-2","bg-primary","text-white","ms-2","cursor-pointer"],[1,"text-primary","mb-3"]],template:function(t,o){t&1&&(s(0,"div",0),_(1,kt,32,13,"div",1),p()),t&2&&(r(),m("ngIf",o.product))},dependencies:[b,y,H],styles:[".product-image-box[_ngcontent-%COMP%]{height:650px;overflow:hidden}.product-image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}"]});let n=a;return n})();var fi=[{path:"",component:$e},{path:":id",component:Ue,data:{breadcrumb:{alias:"productDetails"}}}];export{fi as ShopRouting};
